\hypertarget{_d_t_8c}{}\section{C\+:/\+Users/\+Paula/\+Documents/\+Net\+Beans\+Projects/\+D2\+T/\+DT.c File Reference}
\label{_d_t_8c}\index{C\+:/\+Users/\+Paula/\+Documents/\+Net\+Beans\+Projects/\+D2\+T/\+D\+T.\+c@{C\+:/\+Users/\+Paula/\+Documents/\+Net\+Beans\+Projects/\+D2\+T/\+D\+T.\+c}}


Header file for direct 2 transposed filter realization.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$malloc.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}D\+T.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$ \mbox{\hyperlink{_d_t_8c_a6475b35e1b22b817c12d885bf033a598}{create\+I\+IR}} (unsigned int const N)
\begin{DoxyCompactList}\small\item\em Creates infinite pulse response structure with values of coefficients, filter order,. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_a760e1545104c40aed10621b42ff8a95e}{delete\+I\+IR}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Deallocates the filter structure. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{_d_t_8c_a2ba165264792094aff2efec39aa1d8a7}{read\+First\+Word}} (F\+I\+LE $\ast$fp)
\begin{DoxyCompactList}\small\item\em Reads values of filter structure from a file. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$ \mbox{\hyperlink{_d_t_8c_ab0ec1c0c72c44adfb3754850963a37e3}{get\+Coeffs\+And\+Init\+\_\+direct}} (char $\ast$file\+\_\+name)
\begin{DoxyCompactList}\small\item\em Initialization of a filter structure. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_a34eb4d688e835d84edf6b73b6c6ad3f8}{increment\+State\+Index}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em increments value of state index to point on next state \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_af73f8b96d2a1473477c3f7a27b4453fe}{decrement\+State\+Index}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em decrements value of state index to point on previous state \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_aa90e0a1b3a99866225a1207adcf13441}{reset\+State\+Index}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Returns pointer to the beginning of state array. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{_d_t_8c_a7d30fe678f8d067e70a191985a426b15}{read\+State}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Reads state on the given memory location. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{_d_t_8c_ab9b82140d71ebb1a87a25c90ad3e67b1}{read\+Next\+State}} (struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Reads state on the given memory location. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_a30c586098c3e07640460a2a4178562ee}{write\+State}} (int16\+\_\+t input, struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Writes input state on the given memory location. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{_d_t_8c_a31f6af60c7bbaa861169720a41f95598}{I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed}} (int16\+\_\+t input, struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Calls functions for calculating output value and updating state values. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{_d_t_8c_a8b6d5a9ac7eeedb15b31d5f41425669d}{calculate\+Value}} (int16\+\_\+t input, struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Calls functions for calculating output value and updating state values. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_d_t_8c_a7a2b4d0832610a07f6bcddca303375db}{update\+State}} (int16\+\_\+t input, int16\+\_\+t output, struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$\mbox{\hyperlink{structiir}{iir}})
\begin{DoxyCompactList}\small\item\em Updates value of states. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_d_t_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}\label{_d_t_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
int {\bfseries main} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Header file for direct 2 transposed filter realization. 

\begin{DoxyAuthor}{Author}
Paula FraniÄ‡ 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2018-\/09-\/19 
\end{DoxyDate}


\subsection{Function Documentation}
\mbox{\Hypertarget{_d_t_8c_a8b6d5a9ac7eeedb15b31d5f41425669d}\label{_d_t_8c_a8b6d5a9ac7eeedb15b31d5f41425669d}} 
\index{D\+T.\+c@{D\+T.\+c}!calculate\+Value@{calculate\+Value}}
\index{calculate\+Value@{calculate\+Value}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{calculate\+Value()}{calculateValue()}}
{\footnotesize\ttfamily int16\+\_\+t calculate\+Value (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{input,  }\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Calls functions for calculating output value and updating state values. 

Check if the filter structure is empty. If not, assign values of filter order and coefficients to local variables of function. Multiply input value with amp\+\_\+in and read first state. Multiply second coefficients of a numerator with input and add to zero state. Calculated value is output. Check for 1/a0 which potention is it and shift output value. After all, multiply output value with amp\+\_\+out and shift it 15 times. 
\begin{DoxyParams}{Parameters}
{\em input} & value of a signal to be filtered \\
\hline
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filtered value 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_a6475b35e1b22b817c12d885bf033a598}\label{_d_t_8c_a6475b35e1b22b817c12d885bf033a598}} 
\index{D\+T.\+c@{D\+T.\+c}!create\+I\+IR@{create\+I\+IR}}
\index{create\+I\+IR@{create\+I\+IR}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{create\+I\+I\+R()}{createIIR()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}}$\ast$ create\+I\+IR (\begin{DoxyParamCaption}\item[{unsigned int const}]{N }\end{DoxyParamCaption})}



Creates infinite pulse response structure with values of coefficients, filter order,. 

Function allocates memory for filter structure, filter structure includes filter order, coefficient values, state values, state index value and filter type. After the memory for filter is allocated, we allocate memmory for coefficients and states. If memory couldn\textquotesingle{}t be allocated we delete filter. We set memory values of coefficients and states to 0 and we set the order filter.


\begin{DoxyParams}{Parameters}
{\em filter} & order \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filter structure 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_af73f8b96d2a1473477c3f7a27b4453fe}\label{_d_t_8c_af73f8b96d2a1473477c3f7a27b4453fe}} 
\index{D\+T.\+c@{D\+T.\+c}!decrement\+State\+Index@{decrement\+State\+Index}}
\index{decrement\+State\+Index@{decrement\+State\+Index}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{decrement\+State\+Index()}{decrementStateIndex()}}
{\footnotesize\ttfamily void decrement\+State\+Index (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



decrements value of state index to point on previous state 

We check if the structure is empty. If not, we put decremented value of state\+Index in state\+Index.


\begin{DoxyParams}{Parameters}
{\em input} & value of a signal to be filtered \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filtered value 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_a760e1545104c40aed10621b42ff8a95e}\label{_d_t_8c_a760e1545104c40aed10621b42ff8a95e}} 
\index{D\+T.\+c@{D\+T.\+c}!delete\+I\+IR@{delete\+I\+IR}}
\index{delete\+I\+IR@{delete\+I\+IR}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{delete\+I\+I\+R()}{deleteIIR()}}
{\footnotesize\ttfamily void delete\+I\+IR (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Deallocates the filter structure. 

If the filter structure is already deallocated, then nothing is done. Otherwise, we check also for the coefficient and state allocation and if it isn\textquotesingle{}t empty the we free memory, and set memory values to 0. After freeing coefficient and state memory, we deallocate filter structure memory.


\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_d_t_8c_ab0ec1c0c72c44adfb3754850963a37e3}\label{_d_t_8c_ab0ec1c0c72c44adfb3754850963a37e3}} 
\index{D\+T.\+c@{D\+T.\+c}!get\+Coeffs\+And\+Init\+\_\+direct@{get\+Coeffs\+And\+Init\+\_\+direct}}
\index{get\+Coeffs\+And\+Init\+\_\+direct@{get\+Coeffs\+And\+Init\+\_\+direct}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{get\+Coeffs\+And\+Init\+\_\+direct()}{getCoeffsAndInit\_direct()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}}$\ast$ get\+Coeffs\+And\+Init\+\_\+direct (\begin{DoxyParamCaption}\item[{char $\ast$}]{file\+\_\+name }\end{DoxyParamCaption})}



Initialization of a filter structure. 

Function checks if file containing filter values could be open, if not, returns N\+U\+LL. It needs to read first value from a file which is filter order that is needed to create and initialize filter structure. Then, coefficient values are assigned to coefficient array in filter structure. After we finish initializing, we close the file.


\begin{DoxyParams}{Parameters}
{\em file\+\_\+name} & file containing values of a filter \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_d_t_8c_a31f6af60c7bbaa861169720a41f95598}\label{_d_t_8c_a31f6af60c7bbaa861169720a41f95598}} 
\index{D\+T.\+c@{D\+T.\+c}!I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed@{I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed}}
\index{I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed@{I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed()}{IIRFilter\_direct2\_transposed()}}
{\footnotesize\ttfamily int16\+\_\+t I\+I\+R\+Filter\+\_\+direct2\+\_\+transposed (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{input,  }\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Calls functions for calculating output value and updating state values. 


\begin{DoxyParams}{Parameters}
{\em input} & value of a signal to be filtered \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filtered value 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_a34eb4d688e835d84edf6b73b6c6ad3f8}\label{_d_t_8c_a34eb4d688e835d84edf6b73b6c6ad3f8}} 
\index{D\+T.\+c@{D\+T.\+c}!increment\+State\+Index@{increment\+State\+Index}}
\index{increment\+State\+Index@{increment\+State\+Index}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{increment\+State\+Index()}{incrementStateIndex()}}
{\footnotesize\ttfamily void increment\+State\+Index (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



increments value of state index to point on next state 

We check if the structure is empty. If not, we put incremented value of state\+Index in state\+Index.


\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_d_t_8c_a2ba165264792094aff2efec39aa1d8a7}\label{_d_t_8c_a2ba165264792094aff2efec39aa1d8a7}} 
\index{D\+T.\+c@{D\+T.\+c}!read\+First\+Word@{read\+First\+Word}}
\index{read\+First\+Word@{read\+First\+Word}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{read\+First\+Word()}{readFirstWord()}}
{\footnotesize\ttfamily int16\+\_\+t read\+First\+Word (\begin{DoxyParamCaption}\item[{F\+I\+LE $\ast$}]{fp }\end{DoxyParamCaption})}



Reads values of filter structure from a file. 

Calls functions for calculating output value and updating state values.

Function read first word in a row and converts it to integer value with strtol function from stdlib library.


\begin{DoxyParams}{Parameters}
{\em fp} & file with values of filter structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
converted hex value to int16\+\_\+t 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_ab9b82140d71ebb1a87a25c90ad3e67b1}\label{_d_t_8c_ab9b82140d71ebb1a87a25c90ad3e67b1}} 
\index{D\+T.\+c@{D\+T.\+c}!read\+Next\+State@{read\+Next\+State}}
\index{read\+Next\+State@{read\+Next\+State}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{read\+Next\+State()}{readNextState()}}
{\footnotesize\ttfamily int16\+\_\+t read\+Next\+State (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Reads state on the given memory location. 

Reads next state on the given memory location.

Firstly, we check if filter exists, if not, we return 0. Otherwise we save value of state\+Index in varlable i and return the value of state on that given memory location.


\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
value of state 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_a7d30fe678f8d067e70a191985a426b15}\label{_d_t_8c_a7d30fe678f8d067e70a191985a426b15}} 
\index{D\+T.\+c@{D\+T.\+c}!read\+State@{read\+State}}
\index{read\+State@{read\+State}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{read\+State()}{readState()}}
{\footnotesize\ttfamily int16\+\_\+t read\+State (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Reads state on the given memory location. 

Firstly, we check if filter exists, if not, we return 0. Otherwise we save value of state\+Index in varlable i and return the value of state on that given memory location.


\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
value of state 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_aa90e0a1b3a99866225a1207adcf13441}\label{_d_t_8c_aa90e0a1b3a99866225a1207adcf13441}} 
\index{D\+T.\+c@{D\+T.\+c}!reset\+State\+Index@{reset\+State\+Index}}
\index{reset\+State\+Index@{reset\+State\+Index}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{reset\+State\+Index()}{resetStateIndex()}}
{\footnotesize\ttfamily void reset\+State\+Index (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Returns pointer to the beginning of state array. 

Check if the filter structure is empty. If not, return State\+Index=0 
\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{_d_t_8c_a7a2b4d0832610a07f6bcddca303375db}\label{_d_t_8c_a7a2b4d0832610a07f6bcddca303375db}} 
\index{D\+T.\+c@{D\+T.\+c}!update\+State@{update\+State}}
\index{update\+State@{update\+State}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{update\+State()}{updateState()}}
{\footnotesize\ttfamily void update\+State (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{input,  }\item[{int16\+\_\+t}]{output,  }\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Updates value of states. 

Check if the filter structure is empty. If not, assign values of filter order and coefficients to local variables of function. Increment pointer of coefficients and state. Read state at incremented state index (next state). Add multiplied numerator and input with multiplied denominator and output and next state. Decrement state index and write states. Repeat N -\/ 2 times in for loop. For last state, exit for loop, increment coefficient and state pointers, multiply numerator with numerator and add with multiplication of denominator and output. Finally, write state. 
\begin{DoxyParams}{Parameters}
{\em input} & value of a signal to be filtered \\
\hline
{\em iir} & filter structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
filtered value 
\end{DoxyReturn}
\mbox{\Hypertarget{_d_t_8c_a30c586098c3e07640460a2a4178562ee}\label{_d_t_8c_a30c586098c3e07640460a2a4178562ee}} 
\index{D\+T.\+c@{D\+T.\+c}!write\+State@{write\+State}}
\index{write\+State@{write\+State}!D\+T.\+c@{D\+T.\+c}}
\subsubsection{\texorpdfstring{write\+State()}{writeState()}}
{\footnotesize\ttfamily void write\+State (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{input,  }\item[{struct \mbox{\hyperlink{struct_i_i_r}{I\+IR}} $\ast$}]{iir }\end{DoxyParamCaption})}



Writes input state on the given memory location. 

Initialization of a filter structure.

Firstly, we check if filter exists, if not, we returns. Otherwise we save value of state\+Index in varlable i and return the value of state on that given memory location.


\begin{DoxyParams}{Parameters}
{\em iir} & filter structure \\
\hline
{\em input} & value \\
\hline
\end{DoxyParams}
